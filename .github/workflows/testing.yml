name: Integration testing

on:
    push:
        branches: [master, refactoring]

jobs:
    testing:
        runs-on: ubuntu-latest
        strategy:
            fail-fast: true
            matrix:
                gcc: [8, 9, 10, 11, 12]
        steps:
            - uses: actions/checkout@v3
            - name: Build parKVFinder
              run: |
                apt install gcc-${{ matrix.gcc }}
                gcc --version
                make clean
                make
                sudo make link
              env:
                CC: gcc-${{ matrix.gcc }}
            - name: Integration testing
              run: |
                bash tests/testing.sh


         